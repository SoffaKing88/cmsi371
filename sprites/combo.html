<!doctype html>

<html>
	<head>
		<meta charset = "utf-8" />
	</head>

	<body>
		<canvas id="canvas", width="1024", height="512"> </canvas>

		<script src="https://code.jquery.com/jquery-latest.min.js"> </script>
		<script src="stickman.js"> </script>
		<script src="bow.js"> </script>
		<script src="arrow.js"> </script>
		<script src="target.js"> </script>

		<script>
		(function () {
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");

			var arrowPosX = 150;

			var drawScene = function () {
				ctx.clearRect(0, 0, canvas.width, canvas.height);

				//Archer
				ctx.save();
				ctx.translate(120, 100);
				ctx.scale(0.7, 0.7);
				SpriteLibrary.stickman({
					ctx: ctx,
					leftUpArmAngle: Math.PI / 2,
					rightArmAngle: -Math.PI / 6
				});
				ctx.restore();

				//Target
				ctx.save();
				ctx.translate(800, 70);
				ctx.scale(0.7, 0.7);
				SpriteLibrary.target({
					ctx: ctx,
					opacity: 0.3
				});
				ctx.restore();

				//Arrow
				ctx.save();
				ctx.translate(arrowPosX, 150);
				ctx.scale(0.5, 0.5);
				SpriteLibrary.arrow({
					ctx: ctx
				});
				ctx.restore();

				ctx.save();
				ctx.translate(300, 100);
				ctx.scale(0.3, 0.3);
				SpriteLibrary.bow({
					ctx: ctx,
					pullPointX: -125
				});
				ctx.restore();

				arrowPosX += 3;
				window.requestAnimationFrame(drawScene);

			};

			window.requestAnimationFrame(drawScene);

		}());
		</script>
	</body>
</html>