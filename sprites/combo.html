<!doctype html>

<html>
	<head>
		<meta charset = "utf-8" />
	</head>

	<body>
		<canvas id="canvas", width="1024", height="512"> </canvas>

		<script src="https://code.jquery.com/jquery-latest.min.js"> </script>
		<script src="stickman.js"> </script>
		<script src="bow.js"> </script>
		<script src="arrow.js"> </script>
		<script src="target.js"> </script>
		<script src="background.js"> </script>
		<script src="dmgnums.js"> </script>

		<script>
		(function () {
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");

			var archerLeftUpArmAngle = Math.PI / 2;
			var archerRightArmAngle = -Math.PI / 6;

			var targetOpacity = 1;

			var bowPullPointX = -125;

			var numsOpacity = 1;
			var firstNum = 3;
			var secondNum = 8;
			var thirdNum = 2;
			var fourthNum = 5;

			var drawScene = function () {
				ctx.clearRect(0, 0, canvas.width, canvas.height);

				//Background
				ctx.save();
				ctx.scale(1.8, 1.2);
				SpriteLibrary.background({
					ctx: ctx
				});
				ctx.restore();

				//Archer
				ctx.save();
				ctx.translate(120, 100);
				ctx.scale(0.7, 0.7);
				SpriteLibrary.stickman({
					ctx: ctx,
					leftUpArmAngle: archerLeftUpArmAngle,
					rightArmAngle: archerRightArmAngle
				});
				ctx.restore();

				//Target
				ctx.save();
				ctx.translate(800, 70);
				ctx.scale(0.7, 0.7);
				SpriteLibrary.target({
					ctx: ctx,
					opacity: targetOpacity
				});
				ctx.restore();

				//Numbers
				ctx.save();
				ctx.translate(860, 70);
				SpriteLibrary.dmgnums({
					ctx: ctx,
					opacity: numsOpacity,
					firstNum: firstNum,
					secondNum: secondNum,
					thirdNum: thirdNum,
					fourthNum: fourthNum
				});
				ctx.restore();

				//Arrow
				ctx.save();
				ctx.translate(150, 150);
				ctx.scale(0.5, 0.5);
				SpriteLibrary.arrow({
					ctx: ctx
				});
				ctx.restore();

				//Bow
				ctx.save();
				ctx.translate(300, 100);
				ctx.scale(0.3, 0.3);
				SpriteLibrary.bow({
					ctx: ctx,
					pullPointX: bowPullPointX
				});
				ctx.restore();

				//archerLeftUpArmAngle += Math.PI / 180;

				window.requestAnimationFrame(drawScene);

			};

			window.requestAnimationFrame(drawScene);

		}());
		</script>
	</body>
</html>